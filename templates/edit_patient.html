{% extends "base.html" %} {% block content %}
<style>
  body {
    background-color: #f8f8f8;
  }
  .sidebar {
    height: 100vh;
    width: 250px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    position: fixed;
    top: 0;
    left: 0;
    padding: 40px 20px;
    display: flex;
    flex-direction: column;
  }
  .sidebar a {
    color: white;
    padding: 15px 20px;
    display: block;
    text-decoration: none;
    font-size: 1rem;
  }
  .sidebar a:hover {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 8px;
  }
  .content-area {
    margin-left: 250px;
    padding: 30px;
  }
  .card-shadow {
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
    border-radius: 12px;
    border: none;
    background: white;
    margin-bottom: 20px;
  }
  .card-header-custom {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 20px;
    border-radius: 12px 12px 0 0;
  }
  .btn-update {
    background: #6c63ff;
    color: white;
    border: none;
  }
  .btn-update:hover {
    background: #5850ec;
  }
  .btn-add-allergy {
    background: #6c63ff;
    color: white;
    border: none;
  }
  .btn-add-allergy:hover {
    background: #5850ec;
  }
  .table-actions .btn-edit {
    background: #fff4e6;
    color: #ff8800;
    border: none;
    border-radius: 8px;
    padding: 5px 12px;
  }
  .table-actions .btn-delete {
    background: #ffe6e6;
    color: #ff3333;
    border: none;
    border-radius: 8px;
    padding: 5px 12px;
  }
</style>

<div class="sidebar">
  <h3 class="text-center mb-4">StrokePred</h3>
  <a href="{{ url_for('patient_managment') }}">Patient Management</a>
  <a href="{{ url_for('logout') }}" class="mt-auto"
    ><i class="fas fa-sign-out-alt me-2"></i>Logout</a
  >
</div>

<div class="content-area">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="m-0">Edit Patient</h3>
    <a href="{{ url_for('patient_managment') }}" class="btn btn-secondary">Back</a>
  </div>

  <div class="card card-shadow">
    <div class="card-header-custom">
      <h5 class="m-0">Patient Information</h5>
    </div>
    <div class="card-body p-4">
      <form
        method="POST"
        action="{{ url_for('update_patient', patient_id=patient.id) }}"
      >
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input
              type="text"
              class="form-control"
              id="firstName"
              name="first_name"
              value="{{ patient.first_name }}"
              required
            />
          </div>
          <div class="col-md-6 mb-3">
            <label for="lastName" class="form-label">Last Name</label>
            <input
              type="text"
              class="form-control"
              id="lastName"
              name="last_name"
              value="{{ patient.last_name }}"
              required
            />
          </div>
        </div>
        <div class="row">
           <div class="col-md-6 mb-3">
            <label for="dateOfBirth" class="form-label">Date of Birth</label>
            <input
              type="date"
              class="form-control"
              id="dateOfBirth"
              name="date_of_birth"
              value="{{ patient.date_of_birth }}"
              required
            />
          </div>
          <div class="col-md-6 mb-3">
            <label for="gender" class="form-label">Gender</label>
            <select class="form-select" id="gender" name="gender" required>
              <option value="">Select gender</option>
              <option value="Male" {% if patient.gender == 'Male' %}selected{% endif %}>Male</option>
              <option value="Female" {% if patient.gender == 'Female' %}selected{% endif %}>Female</option>
              <option value="Other" {% if patient.gender == 'Other' %}selected{% endif %}>Other</option>
            </select>
          </div>
        </div>
        <div class="row">
        
           <div class="mb-4">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              value="{{ patient.email }}"
              disabled
            />
          </div>
        </div>
        <div>
          <button type="submit" class="btn btn-update">Update Patient</button>
        </div>
      </form>
    </div>
  </div>

  <div class="card card-shadow">
    <div
      class="card-header-custom d-flex justify-content-between align-items-center"
    >
      <h5 class="m-0">Allergies</h5>
      <button
        class="btn btn-sm btn-light"
        data-bs-toggle="modal"
        data-bs-target="#addAllergyModal"
      >
        <i class="fas fa-plus me-2"></i>Add Allergy
      </button>
    </div>
    <div class="card-body p-4">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>Allergen</th>
            <th>Severity</th>
            <th>Date Added</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Peanuts</td>
            <td><span class="badge bg-danger">Severe</span></td>
            <td>2024-01-15</td>
            <td class="table-actions">
              <button class="btn btn-sm btn-edit">Edit</button>
              <button class="btn btn-sm btn-delete">Delete</button>
            </td>
          </tr>
          <tr>
            <td>Penicillin</td>
            <td><span class="badge bg-warning">Moderate</span></td>
            <td>2024-02-20</td>
            <td class="table-actions">
              <button class="btn btn-sm btn-edit">Edit</button>
              <button class="btn btn-sm btn-delete">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="addAllergyModal"
  tabindex="-1"
  aria-labelledby="addAllergyModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div
        class="modal-header"
        style="
          background: linear-gradient(135deg, #667eea, #764ba2);
          color: white;
        "
      >
        <h5 class="modal-title" id="addAllergyModalLabel">Add Allergy</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form>
        <div class="modal-body">
          <div class="mb-3">
            <label for="allergen" class="form-label"
              >Allergen <span class="text-danger">*</span></label
            >
            <input
              type="text"
              class="form-control"
              id="allergen"
              name="allergen"
              required
            />
          </div>
          <div class="mb-3">
            <label for="severity" class="form-label"
              >Severity <span class="text-danger">*</span></label
            >
            <select class="form-select" id="severity" name="severity" required>
              <option value="">Select severity</option>
              <option value="Mild">Mild</option>
              <option value="Moderate">Moderate</option>
              <option value="Severe">Severe</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="dateAdded" class="form-label"
              >Date Added <span class="text-danger">*</span></label
            >
            <input
              type="date"
              class="form-control"
              id="dateAdded"
              name="date_added"
              required
            />
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="submit" class="btn btn-add-allergy">Add Allergy</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}